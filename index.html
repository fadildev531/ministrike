<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MiniStrike</title>
<style>
body{
    margin:0;
    background:#0f0f0f;
    color:white;
    text-align:center;
    font-family:Arial;
}
canvas{
    background:#111;
    display:block;
    margin:0 auto;
}
button{
    padding:12px 25px;
    font-size:18px;
    background:orange;
    border:none;
    border-radius:8px;
    cursor:pointer;
}
#menu,#gameOver{
    position:absolute;
    top:40%;
    width:100%;
}
</style>
</head>
<body>

<div id="menu">
    <h1>ðŸ”¥ MiniStrike</h1>
    <button onclick="startGame()">PLAY</button>
</div>

<div id="gameOver" style="display:none;">
    <h1>ðŸ’€ GAME OVER</h1>
    <p id="finalScore"></p>
    <button onclick="startGame()">RESTART</button>
</div>

<canvas id="gameCanvas" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let player = { x:200, y:500, size:20 };
let enemies = [];
let score = 0;
let gameRunning = false;

function startGame(){
    document.getElementById("menu").style.display="none";
    document.getElementById("gameOver").style.display="none";
    player.x = 200;
    enemies = [];
    score = 0;
    gameRunning = true;
    spawnEnemy();
    gameLoop();
}

function spawnEnemy(){
    if(!gameRunning) return;

    if(enemies.length < 5){ // maksimal 5 musuh
        enemies.push({
            x:Math.random()*360,
            y:0,
            size:20
        });
    }

    setTimeout(spawnEnemy,1200); // lebih santai
}

document.addEventListener("touchmove",(e)=>{
    player.x = e.touches[0].clientX - 10;
});

document.addEventListener("mousemove",(e)=>{
    player.x = e.clientX - 10;
});

document.addEventListener("click",shoot);

function shoot(){
    enemies.forEach((enemy,index)=>{
        let dx = enemy.x - player.x;
        let dy = enemy.y - player.y;
        let distance = Math.sqrt(dx*dx + dy*dy);

        if(distance < 300){
            if(Math.random() < 0.3){ // 30% chance
                enemies.splice(index,1);
                score++;
            }
        }
    });
}

function gameLoop(){
    if(!gameRunning) return;

    ctx.clearRect(0,0,canvas.width,canvas.height);

    // player
    ctx.fillStyle="cyan";
    ctx.fillRect(player.x,player.y,player.size,player.size);

    // enemies
    ctx.fillStyle="red";
    enemies.forEach((enemy)=>{
        let dx = player.x - enemy.x;
        let dy = player.y - enemy.y;
        let distance = Math.sqrt(dx*dx + dy*dy);

        if(distance > 0){
            enemy.x += (dx/distance)*1.2;
            enemy.y += (dy/distance)*1.2;
        }

        ctx.fillRect(enemy.x,enemy.y,enemy.size,enemy.size);

        if(distance < 20){
            endGame();
        }
    });

    ctx.fillStyle="white";
    ctx.fillText("Score: "+score,10,20);

    requestAnimationFrame(gameLoop);
}

function endGame(){
    gameRunning=false;
    document.getElementById("gameOver").style.display="block";
    document.getElementById("finalScore").innerText="Final Kills: "+score;
}
</script>

</body>
</html>
