<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fadil Game Studio</title>
<style>
body{
    margin:0;
    background:black;
    color:white;
    font-family:Arial;
    text-align:center;
    overflow:hidden;
}
button{
    padding:12px 20px;
    font-size:18px;
    border:none;
    border-radius:10px;
    background:red;
    color:white;
    margin:10px;
}
#controls{
    position:fixed;
    bottom:20px;
    width:100%;
    display:none;
    justify-content:space-around;
}
.controlBtn{
    width:70px;
    height:70px;
    border-radius:50%;
    background:lime;
    font-size:24px;
}
canvas{ background:black; }
</style>
</head>
<body>

<div id="menu">
    <h1>üéÆ Fadil Game Studio</h1>
    <button onclick="startMiniStrike()">üïπ MiniStrike Nightmare</button>
    <button onclick="startHorror()">üíÄ Night Terror</button>
</div>

<div id="gameArea"></div>

<div id="controls">
    <button class="controlBtn" onclick="moveLeft()">‚¨ÖÔ∏è</button>
    <button class="controlBtn" onclick="shoot()">üî•</button>
    <button class="controlBtn" onclick="moveRight()">‚û°Ô∏è</button>
</div>

<script>
let canvas,ctx,loop;
let player,enemies=[],bullets=[],enemyBullets=[];
let mode="",score=0,hp=5,sanity=100;
let spawnRate=1400;
let bossActive=false;

function showControls(){controls.style.display="flex";}
function hideControls(){controls.style.display="none";}

function goHome(){
    cancelAnimationFrame(loop);
    enemies=[]; bullets=[]; enemyBullets=[];
    document.getElementById("gameArea").innerHTML="";
    document.getElementById("menu").style.display="block";
    hideControls();
}

function startMiniStrike(){
    mode="mini";
    score=0;
    hp=5;
    spawnRate=1400;
    bossActive=false;
    startGame();
}

function startHorror(){
    mode="horror";
    sanity=100;
    spawnRate=1200;
    startGame();
}

function startGame(){
    document.getElementById("menu").style.display="none";
    document.getElementById("gameArea").innerHTML=
    `<div id="info" style="position:absolute;top:10px;left:10px;"></div>
     <button onclick="goHome()" style="position:absolute;top:10px;right:10px;">Back</button>
     <canvas id="gameCanvas"></canvas>`;

    canvas=document.getElementById("gameCanvas");
    ctx=canvas.getContext("2d");
    canvas.width=innerWidth;
    canvas.height=innerHeight;

    player={x:canvas.width/2-20,y:canvas.height-80,w:40,h:40};

    spawnEnemy();
    update();
    showControls();
}

function spawnEnemy(){
    let size=30;
    let hpEnemy=1;

    if(score>0 && score%20===0 && !bossActive && mode==="mini"){
        size=90;
        hpEnemy=15;
        bossActive=true;
        navigator.vibrate(200);
    }

    enemies.push({
        x:Math.random()*(canvas.width-size),
        y:-100,
        w:size,
        h:size,
        hp:hpEnemy
    });

    setTimeout(spawnEnemy,spawnRate);
}

function update(){
    ctx.fillStyle="black";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    ctx.fillStyle="white";
    ctx.fillRect(player.x,player.y,player.w,player.h);

    // Player bullets
    bullets.forEach((b,bi)=>{
        b.y-=8;
        ctx.fillStyle="yellow";
        ctx.fillRect(b.x,b.y,b.w,b.h);
        if(b.y<0) bullets.splice(bi,1);
    });

    // Boss bullets
    enemyBullets.forEach((b,bi)=>{
        b.y+=5;
        ctx.fillStyle="orange";
        ctx.fillRect(b.x,b.y,b.w,b.h);

        if(
            b.x<player.x+player.w &&
            b.x+b.w>player.x &&
            b.y<player.y+player.h &&
            b.y+b.h>player.y
        ){
            hp-=2;
            navigator.vibrate(100);
            enemyBullets.splice(bi,1);
            if(hp<=0){ gameOver(); }
        }

        if(b.y>canvas.height) enemyBullets.splice(bi,1);
    });

    enemies.forEach((e,ei)=>{
        e.y+=2 + score*0.05;

        ctx.fillStyle=e.w===90?"purple":(mode==="mini"?"red":"darkred");
        ctx.fillRect(e.x,e.y,e.w,e.h);

        // Boss movement + shooting
        if(e.w===90){
            e.x += Math.sin(Date.now()*0.003)*4;

            if(Math.random()<0.015){
                enemyBullets.push({
                    x:e.x+e.w/2-5,
                    y:e.y+e.h,
                    w:10,
                    h:20
                });
            }
        }

        // Player collision
        if(
            e.x<player.x+player.w &&
            e.x+e.w>player.x &&
            e.y<player.y+player.h &&
            e.y+e.h>player.y
        ){
            if(mode==="mini"){
                hp--;
                navigator.vibrate(100);
                enemies.splice(ei,1);
                if(hp<=0){ gameOver(); }
            }else{
                sanity-=20;
                navigator.vibrate(200);
                if(sanity<=0){ gameOver(); }
            }
        }

        // Bullet hit
        bullets.forEach((b,bi)=>{
            if(
                b.x<e.x+e.w &&
                b.x+b.w>e.x &&
                b.y<e.y+e.h &&
                b.y+b.h>e.y
            ){
                e.hp--;
                bullets.splice(bi,1);
                if(e.hp<=0){
                    if(e.w===90) bossActive=false;
                    enemies.splice(ei,1);
                    score++;
                    if(spawnRate>600) spawnRate-=50;
                }
            }
        });

        if(e.y>canvas.height) enemies.splice(ei,1);
    });

    updateUI();
    loop=requestAnimationFrame(update);
}

function updateUI(){
    let info=document.getElementById("info");
    if(mode==="mini"){
        let high=localStorage.getItem("highscore")||0;
        if(score>high){
            localStorage.setItem("highscore",score);
            high=score;
        }
        info.innerHTML=`Score: ${score}<br>HP: ${hp}<br>Highscore: ${high}`;
    }else{
        info.innerHTML=`Sanity: ${sanity}`;
    }
}

function gameOver(){
    alert("GAME OVER");
    goHome();
}

function moveLeft(){ if(player.x>0) player.x-=20; }
function moveRight(){ if(player.x<canvas.width-player.w) player.x+=20; }
function shoot(){
    if(mode==="mini"){
        bullets.push({
            x:player.x+player.w/2-5,
            y:player.y,
            w:10,
            h:20
        });
    }
}
</script>

</body>
</html>
