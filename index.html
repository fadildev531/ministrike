<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Shooting Game</title>

<style>
body {
  margin: 0;
  background: #111;
  color: white;
  font-family: Arial, sans-serif;
  text-align: center;
  overflow: hidden;
}

canvas {
  background: #ddd;
  border: 3px solid black;
  margin-top: 20px;
}

/* ===== MENU ===== */
.menu {
  position: absolute;
  width: 100%;
  height: 100%;
  background: linear-gradient(#111,#222);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 10;
}

.menu h1 {
  font-size: 28px;
  margin-bottom: 20px;
}

.menu button {
  padding: 12px 25px;
  margin: 10px;
  font-size: 18px;
  border: none;
  cursor: pointer;
  background: orange;
  border-radius: 8px;
}

.hidden {
  display: none;
}

#controls button {
  width: 60px;
  height: 60px;
  font-size: 22px;
  margin: 5px;
}
</style>
</head>

<body>

<!-- START MENU -->
<div id="startMenu" class="menu">
  <h1>ğŸ”¥ Mini Shooting Game</h1>
  <button onclick="startGame()">â–¶ PLAY</button>
</div>

<!-- GAME OVER MENU -->
<div id="gameOverMenu" class="menu hidden">
  <h1>ğŸ’€ GAME OVER</h1>
  <p id="finalScore"></p>
  <button onclick="restartGame()">ğŸ” RESTART</button>
</div>

<h2>HP: <span id="hp">100</span></h2>
<h2>Kills: <span id="kills">0</span></h2>

<canvas id="gameCanvas" width="300" height="300"></canvas>

<div id="controls">
  <br>
  <button onclick="move(0,-10)">â¬†</button><br>
  <button onclick="move(-10,0)">â¬…</button>
  <button onclick="shoot()">ğŸ”«</button>
  <button onclick="move(10,0)">â¡</button><br>
  <button onclick="move(0,10)">â¬‡</button>
</div>

<script>
let canvas = document.getElementById("gameCanvas");
let ctx = canvas.getContext("2d");

let player, enemies, hp, kills;
let gameRunning = false;

/* ===== SOUND ===== */
function playShootSound(){
  let audio = new Audio("https://actions.google.com/sounds/v1/impacts/metal_thud_and_hit.ogg");
  audio.play();
}

/* ===== START GAME ===== */
function startGame(){
  document.getElementById("startMenu").classList.add("hidden");
  initGame();
}

function restartGame(){
  document.getElementById("gameOverMenu").classList.add("hidden");
  initGame();
}

function initGame(){
  player = {x:150, y:150, size:20};
  enemies = [];
  hp = 100;
  kills = 0;
  gameRunning = true;
  spawnEnemies();
  gameLoop();
}

/* ===== SPAWN ENEMY ===== */
function spawnEnemies(){
  setInterval(()=>{
    if(gameRunning){
      enemies.push({
        x: Math.random()*280,
        y: Math.random()*280,
        size:20
      });
    }
  },1500);
}

/* ===== MOVE ===== */
function move(dx,dy){
  if(!gameRunning) return;
  player.x += dx;
  player.y += dy;
}

/* ===== SHOOT ===== */
function shoot(){
  if(!gameRunning) return;
  playShootSound();
  enemies.forEach((e,i)=>{
    if(Math.abs(e.x-player.x)<25 && Math.abs(e.y-player.y)<25){
      enemies.splice(i,1);
      kills++;
    }
  });
}

/* ===== GAME LOOP ===== */
function gameLoop(){
  if(!gameRunning) return;

  ctx.clearRect(0,0,300,300);

  // draw player
  ctx.fillStyle="blue";
  ctx.fillRect(player.x,player.y,player.size,player.size);

  // draw enemies
  ctx.fillStyle="red";
  enemies.forEach(e=>{
    ctx.fillRect(e.x,e.y,e.size,e.size);

    // collision
    if(Math.abs(e.x-player.x)<20 && Math.abs(e.y-player.y)<20){
      hp -= 1;
    }
  });

  document.getElementById("hp").innerText = hp;
  document.getElementById("kills").innerText = kills;

  if(hp <= 0){
    gameRunning = false;
    document.getElementById("finalScore").innerText = "Final Kills: " + kills;
    document.getElementById("gameOverMenu").classList.remove("hidden");
    return;
  }

  requestAnimationFrame(gameLoop);
}
</script>

</body>
</html>
