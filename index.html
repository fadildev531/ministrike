<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fadil Game Studio</title>
<style>
body{
    margin:0;
    background:black;
    color:white;
    font-family:Arial;
    text-align:center;
}
button{
    padding:12px 20px;
    font-size:18px;
    border:none;
    border-radius:10px;
    background:red;
    color:white;
    margin:10px;
}
#controls{
    position:fixed;
    bottom:20px;
    width:100%;
    display:none;
    justify-content:space-around;
}
.controlBtn{
    width:70px;
    height:70px;
    border-radius:50%;
    background:lime;
    font-size:24px;
}
canvas{
    background:black;
}
</style>
</head>
<body>

<div id="menu">
    <h1>üéÆ Fadil Game Studio</h1>
    <button onclick="startMiniStrike()">üïπ MiniStrike</button>
    <button onclick="startHorror()">üíÄ Night Terror</button>
</div>

<div id="gameArea"></div>

<div id="controls">
    <button class="controlBtn" onclick="moveLeft()">‚¨ÖÔ∏è</button>
    <button class="controlBtn" onclick="shoot()">üî•</button>
    <button class="controlBtn" onclick="moveRight()">‚û°Ô∏è</button>
</div>

<script>
let canvas, ctx;
let player;
let enemies=[];
let bullets=[];
let loop;
let mode="";
let score=0;
let sanity=100;
let spawnTimer;

function showControls(){
    document.getElementById("controls").style.display="flex";
}
function hideControls(){
    document.getElementById("controls").style.display="none";
}

function goHome(){
    cancelAnimationFrame(loop);
    clearTimeout(spawnTimer);
    document.getElementById("gameArea").innerHTML="";
    document.getElementById("menu").style.display="block";
    hideControls();
}

function startMiniStrike(){
    mode="mini";
    score=0;
    startGame();
}

function startHorror(){
    mode="horror";
    sanity=100;
    startGame();
}

function startGame(){
    document.getElementById("menu").style.display="none";
    document.getElementById("gameArea").innerHTML=
    `<div id="info" style="position:absolute;top:10px;left:10px;">
        ${mode==="mini"?"Score: 0":"Sanity: 100"}
     </div>
     <button onclick="goHome()" style="position:absolute;top:10px;right:10px;">Back</button>
     <canvas id="gameCanvas"></canvas>`;

    canvas=document.getElementById("gameCanvas");
    ctx=canvas.getContext("2d");
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;

    player={x:canvas.width/2-20,y:canvas.height-80,w:40,h:40};
    enemies=[];
    bullets=[];

    showControls();
    spawnEnemy();
    update();
}

function spawnEnemy(){
    enemies.push({
        x:Math.random()*(canvas.width-30),
        y:-40,
        w:30,
        h:30
    });
    spawnTimer=setTimeout(spawnEnemy,1500);
}

function update(){
    ctx.fillStyle="black";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    // Player
    ctx.fillStyle="white";
    ctx.fillRect(player.x,player.y,player.w,player.h);

    // Bullets (MiniStrike only)
    if(mode==="mini"){
        ctx.fillStyle="yellow";
        bullets.forEach((b,bi)=>{
            b.y-=8;
            ctx.fillRect(b.x,b.y,b.w,b.h);
            if(b.y<0) bullets.splice(bi,1);
        });
    }

    enemies.forEach((e,ei)=>{
        e.y+=2;
        ctx.fillStyle=mode==="mini"?"red":"darkred";
        ctx.fillRect(e.x,e.y,e.w,e.h);

        // Collision player
        if(
            e.x<player.x+player.w &&
            e.x+e.w>player.x &&
            e.y<player.y+player.h &&
            e.y+e.h>player.y
        ){
            if(mode==="mini"){
                alert("Game Over!");
                goHome();
            }else{
                sanity-=25;
            }
        }

        // Bullet hit
        if(mode==="mini"){
            bullets.forEach((b,bi)=>{
                if(
                    b.x<e.x+e.w &&
                    b.x+b.w>e.x &&
                    b.y<e.y+e.h &&
                    b.y+b.h>e.y
                ){
                    enemies.splice(ei,1);
                    bullets.splice(bi,1);
                    score++;
                    document.getElementById("info").innerText="Score: "+score;
                }
            });
        }

        if(e.y>canvas.height) enemies.splice(ei,1);
    });

    if(mode==="horror"){
        document.getElementById("info").innerText="Sanity: "+sanity;
        if(sanity<=0){
            alert("YOU LOST YOUR MIND");
            goHome();
        }
    }

    loop=requestAnimationFrame(update);
}

function moveLeft(){
    if(player && player.x>0) player.x-=20;
}
function moveRight(){
    if(player && player.x<canvas.width-player.w) player.x+=20;
}
function shoot(){
    if(mode==="mini"){
        bullets.push({
            x:player.x+player.w/2-5,
            y:player.y,
            w:10,
            h:20
        });
    }
}
</script>

</body>
</html>
